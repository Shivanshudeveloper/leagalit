(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[98],{86886:function(n,e,t){"use strict";t.d(e,{ZP:function(){return S}});var i=t(63366),r=t(87462),o=t(67294),c=(t(45697),t(86010)),a=t(95408),s=t(39707),l=t(77463),d=t(11496),u=t(33616);var x=o.createContext(),g=t(21420);function m(n){return(0,g.Z)("MuiGrid",n)}const f=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12];var h=(0,t(11271).Z)("MuiGrid",["root","container","item","zeroMinWidth",...[0,1,2,3,4,5,6,7,8,9,10].map((n=>`spacing-xs-${n}`)),...["column-reverse","column","row-reverse","row"].map((n=>`direction-xs-${n}`)),...["nowrap","wrap-reverse","wrap"].map((n=>`wrap-xs-${n}`)),...f.map((n=>`grid-xs-${n}`)),...f.map((n=>`grid-sm-${n}`)),...f.map((n=>`grid-md-${n}`)),...f.map((n=>`grid-lg-${n}`)),...f.map((n=>`grid-xl-${n}`))]),p=t(85893);const j=["className","columns","columnSpacing","component","container","direction","item","lg","md","rowSpacing","sm","spacing","wrap","xl","xs","zeroMinWidth"];function v(n){const e=parseFloat(n);return`${e}${String(n).replace(String(e),"")||"px"}`}const w=(0,d.ZP)("div",{name:"MuiGrid",slot:"Root",overridesResolver:(n,e)=>{const{container:t,direction:i,item:r,lg:o,md:c,sm:a,spacing:s,wrap:l,xl:d,xs:u,zeroMinWidth:x}=n.ownerState;return[e.root,t&&e.container,r&&e.item,x&&e.zeroMinWidth,t&&0!==s&&e[`spacing-xs-${String(s)}`],"row"!==i&&e[`direction-xs-${String(i)}`],"wrap"!==l&&e[`wrap-xs-${String(l)}`],!1!==u&&e[`grid-xs-${String(u)}`],!1!==a&&e[`grid-sm-${String(a)}`],!1!==c&&e[`grid-md-${String(c)}`],!1!==o&&e[`grid-lg-${String(o)}`],!1!==d&&e[`grid-xl-${String(d)}`]]}})((({ownerState:n})=>(0,r.Z)({boxSizing:"border-box"},n.container&&{display:"flex",flexWrap:"wrap",width:"100%"},n.item&&{margin:0},n.zeroMinWidth&&{minWidth:0},"nowrap"===n.wrap&&{flexWrap:"nowrap"},"reverse"===n.wrap&&{flexWrap:"wrap-reverse"})),(function({theme:n,ownerState:e}){return(0,a.k9)({theme:n},e.direction,(n=>{const e={flexDirection:n};return 0===n.indexOf("column")&&(e[`& > .${h.item}`]={maxWidth:"none"}),e}))}),(function({theme:n,ownerState:e}){const{container:t,rowSpacing:i}=e;let r={};return t&&0!==i&&(r=(0,a.k9)({theme:n},i,(e=>{const t=n.spacing(e);return"0px"!==t?{marginTop:`-${v(t)}`,[`& > .${h.item}`]:{paddingTop:v(t)}}:{}}))),r}),(function({theme:n,ownerState:e}){const{container:t,columnSpacing:i}=e;let r={};return t&&0!==i&&(r=(0,a.k9)({theme:n},i,(e=>{const t=n.spacing(e);return"0px"!==t?{width:`calc(100% + ${v(t)})`,marginLeft:`-${v(t)}`,[`& > .${h.item}`]:{paddingLeft:v(t)}}:{}}))),r}),(({theme:n,ownerState:e})=>n.breakpoints.keys.reduce(((t,i)=>(function(n,e,t,i){const o=i[t];if(!o)return;let c={};if(!0===o)c={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if("auto"===o)c={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const n=(0,a.P$)({values:i.columns,base:e.breakpoints.values}),s=Math.round(o/n[t]*1e8)/1e6+"%";let l={};if(i.container&&i.item&&0!==i.columnSpacing){const n=e.spacing(i.columnSpacing);if("0px"!==n){const e=`calc(${s} + ${v(n)})`;l={flexBasis:e,maxWidth:e}}}c=(0,r.Z)({flexBasis:s,flexGrow:0,maxWidth:s},l)}0===e.breakpoints.values[t]?Object.assign(n,c):n[e.breakpoints.up(t)]=c}(t,n,i,e),t)),{})));var S=o.forwardRef((function(n,e){const t=(0,u.Z)({props:n,name:"MuiGrid"}),a=(0,s.Z)(t),{className:d,columns:g,columnSpacing:f,component:h="div",container:v=!1,direction:S="row",item:Z=!1,lg:y=!1,md:b=!1,rowSpacing:$,sm:k=!1,spacing:C=0,wrap:W="wrap",xl:_=!1,xs:P=!1,zeroMinWidth:E=!1}=a,M=(0,i.Z)(a,j),O=$||C,F=f||C,N=o.useContext(x),I=g||N||12,z=(0,r.Z)({},a,{columns:I,container:v,direction:S,item:Z,lg:y,md:b,sm:k,rowSpacing:O,columnSpacing:F,wrap:W,xl:_,xs:P,zeroMinWidth:E}),T=(n=>{const{classes:e,container:t,direction:i,item:r,lg:o,md:c,sm:a,spacing:s,wrap:d,xl:u,xs:x,zeroMinWidth:g}=n,f={root:["root",t&&"container",r&&"item",g&&"zeroMinWidth",t&&0!==s&&`spacing-xs-${String(s)}`,"row"!==i&&`direction-xs-${String(i)}`,"wrap"!==d&&`wrap-xs-${String(d)}`,!1!==x&&`grid-xs-${String(x)}`,!1!==a&&`grid-sm-${String(a)}`,!1!==c&&`grid-md-${String(c)}`,!1!==o&&`grid-lg-${String(o)}`,!1!==u&&`grid-xl-${String(u)}`]};return(0,l.Z)(f,m,e)})(z);return B=(0,p.jsx)(w,(0,r.Z)({ownerState:z,className:(0,c.Z)(T.root,d),as:h,ref:e},M)),12!==I?(0,p.jsx)(x.Provider,{value:I,children:B}):B;var B}))},66075:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/sharedAgreements",function(){return t(71051)}])},93517:function(n,e,t){"use strict";var i=t(67294);e.Z=function(n){var e=(0,i.useState)(""),t=e[0],r=e[1];return(0,i.useEffect)((function(){r(sessionStorage.getItem(n))}),[]),t}},71051:function(n,e,t){"use strict";t.r(e);var i=t(34051),r=t.n(i),o=t(85893),c=t(67294),a=t(9008),s=t(42293),l=t(10155),d=t(93946),u=t(87357),x=t(27948),g=t(26447),m=t(11057),f=t(50135),h=t(15861),p=t(87918),j=t(47434),v=t(46447),w=t(27222),S=t.n(w),Z=(t(38089),t(7906)),y=t(295),b=t(53252),$=t(72882),k=t(53184),C=t(68509),W=t(55113),_=t(6714),P=t(78262),E=t(54776),M=t(50594),O=t(36679),F=(t(74231),t(57333),t(93517)),N=t(9669),I=t.n(N),z=t(11163),T=t(85540),B=t(241);function G(n,e,t,i,r,o,c){try{var a=n[o](c),s=a.value}catch(l){return void t(l)}a.done?e(s):Promise.resolve(s).then(i,r)}function A(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function D(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{},i=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(t).filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})))),i.forEach((function(e){A(n,e,t[e])}))}return n}t(49360);var L=c.forwardRef((function(n,e){return(0,o.jsx)(E.Z,D({direction:"left",ref:e},n))})),R=(t(49360),function(){var n,e=function(){U(!1)},t=((0,z.useRouter)(),(0,F.Z)("userId")),i=(0,F.Z)("userEmail"),v=(0,c.useState)([]),w=v[0],E=v[1],N=(0,c.useState)(!1),A=N[0],D=N[1];(0,c.useEffect)((n=r().mark((function n(){var e;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i){n.next=2;break}return n.abrupt("return");case 2:e="".concat(T.q,"/shared_agreements/").concat(i),I().get(e).then((function(n){console.log(n.data),E(n.data.reverse())})).catch((function(n){throw n}));case 4:case"end":return n.stop()}}),n)})),function(){var e=this,t=arguments;return new Promise((function(i,r){var o=n.apply(e,t);function c(n){G(o,i,r,c,a,"next",n)}function a(n){G(o,i,r,c,a,"throw",n)}c(void 0)}))}),[t,A]);var R=(0,c.useState)(!1),q=R[0],U=R[1],X=(0,c.useState)({}),V=X[0],Y=X[1],H=(0,c.useState)(),J=H[0],K=H[1],Q=(0,c.useState)(0),nn=Q[0],en=Q[1];(0,c.useEffect)((function(){J&&I().get("".concat(T.q,"/single_agreement/").concat(J)).then((function(n){Y(n.data)})).catch((function(n){console.log(n)}))}),[J]);var tn=(0,c.useState)(null),rn=tn[0],on=tn[1],cn=(0,c.useState)(null),an=cn[0],sn=cn[1],ln=(0,c.useState)(),dn=ln[0],un=ln[1];(0,c.useEffect)((function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(n){on(n.coords.latitude),sn(n.coords.longitude)}))}),[]),(0,c.useEffect)((function(){rn&&an&&I().get("".concat(T.q,"/get_location/").concat(rn,"/").concat(an)).then((function(n){un(n.data),console.log(n.data)})).catch((function(n){return console.log(n)}))}),[rn,an]);var xn=(0,c.useState)(),gn=xn[0],mn=xn[1],fn=(0,c.useState)(""),hn=fn[0],pn=fn[1];return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(P.Z,{maxWidth:"lg",open:q,onClose:e,TransitionComponent:L,children:[(0,o.jsx)(s.Z,{sx:{position:"relative",backgroundColor:"#111827"},id:"serviceTopBar",children:(0,o.jsx)(l.Z,{children:(0,o.jsx)(d.Z,{color:"inherit",onClick:e,"aria-label":"close",children:(0,o.jsx)(M.Z,{})})})}),(0,o.jsx)(u.Z,{sx:{width:"100%",padding:"0.5rem"},children:(0,o.jsxs)(x.Z,{sx:{mt:4,mb:4,padding:"1rem"},children:[0===nn&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(B.m,{agreement:V}),(0,o.jsxs)(g.Z,{sx:{float:"right",mt:2,mb:2},direction:"row",spacing:1,children:[(0,o.jsx)(m.Z,{variant:"outlined",color:"info",onClick:e,sx:{width:"100px"},children:"Close"}),(0,o.jsx)(m.Z,{variant:"outlined",color:"info",sx:{m:2},onClick:function(){en(nn+1)},children:"Sign Agreement"})]})]}),1===nn&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:hn?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("img",{src:hn}),(0,o.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"15rem"},children:(0,o.jsx)(m.Z,{variant:"outlined",color:"info",sx:{m:2},onClick:function(){pn(void 0)},children:"Retake Photo"})})]}):(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(S(),{onTakePhoto:function(n){!function(n){pn(n),console.log(n)}(n)},onCameraError:function(n){!function(n){console.log("handleCameraError",n)}(n)},isFullscreen:!1})})}),(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[(0,o.jsx)(m.Z,{variant:"outlined",color:"info",sx:{m:2},onClick:function(){en(nn-1)},children:"Back"}),hn&&(0,o.jsx)(m.Z,{variant:"outlined",color:"info",sx:{m:2},onClick:function(){hn&&en(nn+1)},children:"Continue"})]})]}),2===nn&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[(0,o.jsx)("h2",{children:"User Location :"}),rn?(0,o.jsxs)(o.Fragment,{children:["You are at : ",rn," ",an," ",(0,o.jsx)("br",{}),null===dn||void 0===dn?void 0:dn.formattedAddress]}):(0,o.jsx)(o.Fragment,{children:"Please turn on geolocation to continue"})]}),(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[(0,o.jsx)(m.Z,{variant:"outlined",color:"info",sx:{m:2},onClick:function(){en(nn-1)},children:"Back"}),rn&&(0,o.jsx)(m.Z,{variant:"outlined",color:"info",sx:{m:2},onClick:function(){hn&&rn&&en(nn+1)},children:"Continue"})]})]}),3===nn&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[(0,o.jsx)("h2",{children:"Please enter your full name"}),(0,o.jsx)(f.Z,{value:gn,onChange:function(n){mn(n.target.value)},sx:{m:2},fullWidth:!0,label:"Full Name",variant:"outlined"})]}),(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[(0,o.jsx)(m.Z,{variant:"outlined",color:"info",sx:{m:2},onClick:function(){en(nn-1)},children:"Back"}),gn&&(0,o.jsx)(m.Z,{variant:"contained",color:"info",sx:{m:2},onClick:function(){if(hn&&rn&&gn){var n="".concat(T.q,"/tenant_sign_agreement/").concat(J);I().patch(n,{tenantSignatureDetails:{latitude:rn,longitude:an,fullNameOfSigner:gn,signerImg:hn,address:null===dn||void 0===dn?void 0:dn.formattedAddress}}).then((function(n){console.log(n.data),e(),pn(void 0),K(void 0),en(0),mn(""),D(!A)})).catch((function(n){throw n}))}},children:"Submit"})]})]})]})})]}),(0,o.jsx)(a.default,{children:(0,o.jsx)("title",{children:"SharedAgreements"})}),(0,o.jsx)(u.Z,{component:"main",sx:{flexGrow:1,py:8},children:(0,o.jsxs)(x.Z,{maxWidth:!1,children:[(0,o.jsx)(h.Z,{sx:{m:1},variant:"h4",children:"Shared Agreements"}),(0,o.jsx)($.Z,{component:W.Z,children:(0,o.jsxs)(Z.Z,{sx:{minWidth:650},"aria-label":"simple table",children:[(0,o.jsx)(k.Z,{children:(0,o.jsxs)(C.Z,{children:[(0,o.jsx)(b.Z,{children:"Sl No."}),(0,o.jsx)(b.Z,{align:"center",children:"Title"}),(0,o.jsx)(b.Z,{align:"center",children:"Type"}),(0,o.jsx)(b.Z,{align:"center",children:"Landlord"}),(0,o.jsx)(b.Z,{align:"center",children:"Created on"}),(0,o.jsx)(b.Z,{align:"center",children:"Status"}),(0,o.jsx)(b.Z,{align:"center"})]})}),(0,o.jsx)(y.Z,{children:null===w||void 0===w?void 0:w.map((function(n,e){return(0,o.jsxs)(C.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,o.jsx)(b.Z,{component:"th",scope:"row",children:e+1}),(0,o.jsx)(b.Z,{align:"center",children:n.title}),(0,o.jsx)(b.Z,{align:"center",children:n.template}),(0,o.jsx)(b.Z,{align:"center",children:n.landlord.landlordName}),(0,o.jsx)(b.Z,{align:"center",children:n.date}),(0,o.jsx)(b.Z,{align:"center",children:(0,o.jsx)(p.Z,{label:1===n.isSigned?"Landlord Signed":2===n.isSigned?"Signed":"Unsigned",color:1===n.isSigned?"warning":2===n.isSigned?"success":"error"})}),(0,o.jsxs)(b.Z,{align:"center",children:[(0,o.jsx)(j.Z,{title:"View",children:(0,o.jsx)(d.Z,{color:"primary","aria-label":"upload picture",component:"span",onClick:function(){window.open("/viewAgreement?agreementID=".concat(n._id))},children:(0,o.jsx)(_.Z,{})})}),1===n.isSigned&&(0,o.jsx)(j.Z,{title:"Sign",children:(0,o.jsx)(d.Z,{color:"primary","aria-label":"upload picture",component:"span",onClick:function(){K(n._id),U(!0)},children:(0,o.jsx)(O.Z,{})})})]})]},n._id)}))})]})})]})})]})});R.getLayout=function(n){return(0,o.jsx)(v.c,{children:n})},e.default=R}},function(n){n.O(0,[63,766,367,137,231,325,669,814,361,92,447,642,774,888,179],(function(){return e=66075,n(n.s=e);var e}));var e=n.O();_N_E=e}]);